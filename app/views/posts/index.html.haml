.main
  .main-top
    .main-top__box
      %p.main-top__box--todays-theme
        %span{style: "font-weight:bold;"}
          本日のテーマ『
          = @today_theme.name
          』
      = render partial: "/shared/clock"




    -# ----------------------------------------------------------
  - if @best.present?
    = image_tag asset_path("#{@best.first.image}"), class: "behind-img"
    .behind-boke
    .section-one
      %span.section-one__notice-msg{style: "margin-top:80px; color:black;"}
        = notice
      %h2.section-one__img-description
        = fa_icon "trophy", {style: "color: yellow;"}
        今日の一枚
        %span{style: "font-size:12px;color:lightgray;padding-left:10px;cursor:pointer;"} ※今日の一枚とは？
      .yesterdays-number-one
        .yesterdays-number-one__img
          = link_to post_path(@best.first.id) do
            = image_tag asset_path("#{@best.first.image}"), class: "yesterdays-number-one__img--prev"
        .yesterdays-number-one__details
          %h3.yesterdays-number-one__details__heading
            投稿詳細
          %ul.yesterdays-number-one__details__lists
            %li.yesterdays-number-one__details__lists--a-list
              テーマ：
              = link_to "/themes/#{@best.first.themes.first.id}", class: "theme-link" do
                %span.theme-tag.tag1
                  = @best.first.themes.first.name   
            %li.yesterdays-number-one__details__lists--a-list
              タイトル：
              = @best.first.title
            %li.yesterdays-number-one__details__lists--a-list
              メッセージ：
              = @best.first.message
            %li.yesterdays-number-one__details__lists--a-list
              投稿日：
              = @best.first.created_at.to_s(:datetime_jp)
            %li.yesterdays-number-one__details__lists--a-list
              投稿者：
              = link_to "#{@best.first.user.nickname}", user_path(@best.first.user.id), class: "name-link"
            .likes-favorites
              - if user_signed_in? #登録、ログイン済
                - unless current_user.already_liked?(@best.first) #いいね!済
                  %span.like-push-time-over.already_liked
                    %span.like-submit
                      いいね集計済
                    = @best.first.likes.count
                  - if current_user.already_favorited?(@best.first)
                    %span.fav-push.already-faved
                      = link_to post_favorite_path(@best.first, id: current_user.id), method: :delete, class: "like-submit" do
                        お気に入り解除
                      = @best.first.favorites.count
                  - else
                    %span.fav-push
                      = link_to post_favorites_path(@best.first), method: :post, class: "like-submit" do
                        お気に入り追加
                      = @best.first.favorites.count
                - else #未いいね!
                  %span.like-push-time-over.time-over-liked
                    %span.like-submit
                      いいね集計済
                    = @best.first.likes.count
                  - if current_user.already_favorited?(@best.first)
                    %span.fav-push.already-faved
                      = link_to post_favorite_path(@best.first, id: current_user.id), method: :delete, class: "like-submit" do
                        お気に入り解除
                      = @best.first.favorites.count
                  - else
                    %span.fav-push
                      = link_to post_favorites_path(@best.first), method: :post, class: "like-submit" do
                        お気に入り追加
                      = @best.first.favorites.count
              - else #未ログイン
                %span.like-push
                  %span.like-submit
                    いいね集計済
                  = @best.first.likes.count
                %span.like-push
                  = link_to new_user_registration_path, class: "like-submit" do
                    お気に入り追加
                  = @best.first.likes.count


  - else
    .section-one
      %span.section-one__notice-msg{style: "margin-top:80px; color:black;"}
        = notice
      %h2.section-one__img-description
        = fa_icon "trophy", {style: "color: yellow;"}
        昨日の投稿はひとつもありませんでした。
      -# ----------------------------------------------------------


  .section-two
  
    .section-two__heading
      %b #{@best.first.user.nickname}
      さんの投稿 投稿総数 #{@best.first.user.posts.count}
      枚
    %ul.section-two__user-posts
      - @best.first.user.posts.each do |best|
        = link_to post_path(best.id) do
          %li.img-box
            = image_tag asset_path("#{best.image}"), class: "img-box"


  .section-three
    .section-three__top
      %h1.todays-posts.sec3-text
        Today's Posts
      %p.posts-theme.sec3-text
        本日のテーマ
        %br
      %span.sec3-text
        = link_to "#", class: "theme-link" do
          %span.theme-tag
            = @today_theme.name 




  .section-four
    %ul.tab-group
      %li.tab.is-active
        今日の投稿
        .theme-link
          %span.theme-tag
            = @today_theme.name 

      %li.tab
        昨日の投稿
        .theme-link
          %span.theme-tag
            = @yesterday_theme.name 
      %li.tab
        過去の投稿
        
    .panel-group
      .panel.is-show
        - @today_posts.each do |post|
          = render partial: "post", locals: { post: post }
        = paginate(@today_posts)
      .panel
        - @yesterday_posts.each do |post|
          = render partial: "post", locals: { post: post }
        = paginate(@yesterday_posts)
      .panel
        - @old_posts.each do |post|
          = render partial: "post", locals: { post: post }
        = paginate(@old_posts)

  = render "/shared/new_post"

  %footer.footer
    .footer__contents
      %h3.footer__contents--heading ONE DPC (One Day Photo Contest)
      %p.footer__contents__contest-description
        ONE DPC とは、One Day Photo Contest の略で、カメラ初心者やアマチュア写真愛好家向けの写真投稿サイトです。
        %br
        （One Day 毎日開催、一日限定。  One Photo 投稿できるのは一人一枚。   One Contest 一日完結のコンテスト。）
        %br
        %br
        ルールは以下の通り。
        %br
        ①ユーザーがその日のテーマに合わせて写真を投稿。
        %br
        ②他ユーザーからのいいねが評価の対象。
        %br
        ③当日24時までに一番多くのいいねを獲得した写真がその日の優勝作品となり、次の日の『今日の一枚』として表示される。
        %br
      %ul.footer__contents__links
        %li
          近日公開予定
          = link_to "開発者のポートフォリオサイト", "#"

